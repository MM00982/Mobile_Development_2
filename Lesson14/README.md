# Практическая работа №14

## Глава 1. Работа с фрагментами (Проект FragmentsApp)

Для изучения различных аспектов работы с фрагментами было создано отдельное приложение FragmentsApp, демонстрирующее 4 основных сценария использования. В главном меню реализованы переходы к каждому из заданий.

<img width="2560" height="1538" alt="image_2025-12-20_01-56-58" src="https://github.com/user-attachments/assets/4a6e0a0b-5bc0-4484-9c1a-6835525fe8a4" />

### 1.1. Передача данных во фрагмент (Arguments)
В первом задании реализован StudentFragment, который принимает данные (номер студента) через Bundle и метод setArguments. При создании фрагмента в Activity аргументы передаются в транзакцию, а во фрагменте извлекаются через requireArguments(). Это позволяет передавать начальные данные при создании компонента.

<img width="2560" height="1544" alt="image_2025-12-20_01-57-07" src="https://github.com/user-attachments/assets/9cd3a528-0b57-429a-819d-942bca5d9e4a" />

### 1.2. Взаимодействие фрагментов (SharedViewModel)
Реализован классический паттерн Master-Detail. На экране размещены два фрагмента: список стран (ListFragment) и детали (DetailsFragment). Для обмена данными используется общая SharedViewModel, привязанная к жизненному циклу Activity. При клике на элемент в списке данные обновляются в ViewModel, и второй фрагмент, подписанный на изменения (LiveData), автоматически обновляет свой UI.

<img width="2560" height="1543" alt="image_2025-12-20_01-57-21" src="https://github.com/user-attachments/assets/9deb5948-9563-4e33-8113-196214eae9c2" />

### 1.3. Fragment Result API
Использован современный способ передачи данных между фрагментами без общей ViewModel. По нажатию кнопки открывается BottomSheetDialogFragment, где пользователь вводит текст. Данные возвращаются в родительский фрагмент через setFragmentResult, а родитель слушает их через setFragmentResultListener.

<img width="2560" height="1540" alt="image_2025-12-20_01-57-42" src="https://github.com/user-attachments/assets/bae5cef9-321e-44aa-a4c8-4be22fd7d936" />
<img width="2560" height="1545" alt="image_2025-12-20_01-58-10" src="https://github.com/user-attachments/assets/10c96617-13fb-4eab-b41d-139473f1e940" />

### 1.4. Взаимодействие с Activity (Interface)
Реализован механизм Callback. Фрагмент объявляет интерфейс FragmentListener, который реализует хост-Activity. При нажатии кнопки во фрагменте вызывается метод интерфейса, и Activity показывает всплывающее сообщение (Toast). Это обеспечивает слабую связность компонентов.

<img width="2560" height="1541" alt="image_2025-12-20_01-58-27" src="https://github.com/user-attachments/assets/88476b24-780a-4e58-9ea5-c472e3463e23" />

---

## Глава 2. Контрольное задание (Travel Weather)

В основном приложении «Travel Weather» была произведена глобальная реструктуризация навигации.
Миграция на Single Activity Architecture:
Ранее приложение состояло из нескольких Activity. В рамках задания архитектура была 
изменена на использование одной MainActivity и множества фрагментов (HomeFragment, WeatherFragment, ProfileFragment, LoginFragment).
* Navigation: Все переходы между экранами теперь осуществляются через FragmentManager (транзакции replace, addToBackStack).
* HomeFragment: Главный экран со списком городов переписан на фрагмент.
* WeatherFragment: Экран детального прогноза теперь тоже фрагмент, принимающий название города через аргументы.
* Back Stack: Корректно настроен стек возврата, кнопка "Назад" возвращает на предыдущий фрагмент, а не закрывает приложение.

Это позволило сделать переходы более плавными и упростило управление состоянием приложения.

<img width="2560" height="1545" alt="image_2025-12-20_02-14-52" src="https://github.com/user-attachments/assets/c7339361-931d-47e1-8814-c84580ca2f51" />

---

## Вывод

В ходе работы изучены фундаментальные принципы построения UI на основе фрагментов. 
Рассмотрены способы передачи данных (Arguments, Result API, ViewModel, Interfaces) и управления транзакциями. 
Полученные знания применены для модернизации архитектуры основного проекта, что приблизило его к современным стандартам Android-разработки (Single Activity).

---

**Выполнил**: Мусин М.Р.  
**Группа**: БСБО-09-22
